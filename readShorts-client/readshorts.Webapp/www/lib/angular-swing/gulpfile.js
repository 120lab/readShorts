var karma=require("karma").server,gulp=require("gulp"),jshint=require("gulp-jshint"),header=require("gulp-header"),rename=require("gulp-rename"),ngAnnotate=require("gulp-ng-annotate"),uglify=require("gulp-uglify"),browserify=require("gulp-browserify"),fs=require("fs"),del=require("del"),jsonfile=require("jsonfile"),GitDown=require("gitdown");gulp.task("lint",function(){return gulp.src("./src/*.js").pipe(jshint()).pipe(jshint.reporter("jshint-stylish"))}),gulp.task("clean",["lint"],function(e){del(["dist"]).then(function(){e()})}),gulp.task("bundle",["clean"],function(){return gulp.src("./src/angular-swing.js").pipe(ngAnnotate({add:!0})).pipe(browserify({})).pipe(gulp.dest("./dist/"))}),gulp.task("version",["bundle"],function(){var e="angular-swing",n=jsonfile.readFileSync("./package.json"),i=jsonfile.readFileSync("./bower.json");gulp.src("./dist/"+e+".js").pipe(header("/**\n * @version <%= version %>\n * @link https://github.com/gajus/"+e+" for the canonical source repository\n * @license https://github.com/gajus/"+e+"/blob/master/LICENSE BSD 3-Clause\n */\n",{version:n.version})).pipe(gulp.dest("./dist/")).pipe(uglify()).pipe(rename(e+".min.js")).pipe(header("/**\n * @version <%= version %>\n * @link https://github.com/gajus/"+e+" for the canonical source repository\n * @license https://github.com/gajus/"+e+"/blob/master/LICENSE BSD 3-Clause\n */\n",{version:n.version})).pipe(gulp.dest("./dist/")),i.name=n.name,i.description=n.description,i.version=n.version,i.keywords=n.keywords,i.license=n.license,i.authors=[n.author],jsonfile.writeFileSync("./bower.json",i)}),gulp.task("gitdown",function(){return GitDown.read(".gitdown/README.md").write("README.md")}),gulp.task("watch",function(){gulp.watch(["./src/*","./package.json"],["default"]),gulp.watch(["./.gitdown/*"],["gitdown"])}),gulp.task("test",["default"],function(e){karma.start({configFile:__dirname+"/karma.conf.js",singleRun:!0},e)}),gulp.task("default",["version"]);